<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ACME - Video Portal</title>

    <!-- Main Styling -->
    <link href="/css/main.css" rel="stylesheet">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">

    <!-- Font Awesome Icons -->
    <link href="/css/font-awesome.min.css" rel="stylesheet">

    <!-- Open Sans Font -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,500,600,700,900' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>

<body>

    <nav id="sidebar-wrapper">
        <ul class="sidebar">
            <a href="#" id="menu-close" class="pull-right toggle">
                <img src="/images/X.png">
            </a>
            <ul>
                <li class="title">Menu</li>
                <li>
                    <a href="#">
                        <i class="fa fa-eye"></i> What to watch</a>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-user"></i> My Channel</a>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-clock-o"></i> History</a>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-repeat"></i> Watch Later</a>
                </li>
            </ul>
            <ul id="playlist">
                <li class="title">Playlists</li>
                <li>
                    <a href="#">
                        <i class="fa fa-headphones"></i> Best of David Guetta
                        <p>David Guetta</p>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-film"></i> Favourite Videos
                        <p>Check your favourite videos</p>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="fa fa-thumbs-o-up"></i> Liked Videos
                        <p>Reach all the videos you like</p>
                    </a>
                </li>
            </ul>
            <ul id="subs">
                <li class="title">Subscriptions</li>
                <!--<li><a href="#"><img src="images/shoes.png"> NikeShoes</a></li>
                <li><a href="#"><img src="images/shakira.png"> ShakiraVEVO</a></li>
                <li><a href="#"><img src="images/nike.png"> NikeFootball</a></li>-->
            </ul>
        </ul>
        <!-- End Sidebar -->
    </nav>
    <!-- End Sidebar-wrapper -->

    <header>
        <div class="container-fluid">
            <div class="row">

                <div class="col-md-2">
                    <a href="/">
                        <img src="/images/logo.png" class="logo">
                    </a>

                    <a href="#" id="menu-toggle">
                        <img src="/images/menu.png">
                    </a>
                </div>
                <!-- End Logo & Menu-Toggle -->

                <!-- <div class="col-md-5">
                    <form><input placeholder="Type to search..." type="text"></form>
                </div> -->
                <!-- End Search-Bar -->

                <div class="col-md-10">
                    <ul id="user-info">
                        <li class="pull-right">
                            <a href="/upload" class="button">Upload</a>
                        </li>
                        <!--<li>
                            <ul class="notifications">
                                <li><i class="fa fa-envelope"></i><span>1</span></li>
                                <li><i class="fa fa-bell"></i><span>3</span></li>
                            </ul>
                         </li>
                        <li>
                        <img src="images/profile.png">
                        <div>
                            <p class="username">John Doe</p>
                            <p>9 Subscribers</p>
                            <a href="#">Log out</a>
                        </div>
                        </li> -->
                    </ul>
                    <!-- End Ul -->
                </div>
                <!-- End User Information -->

            </div>
            <!-- End Row -->
        </div>
        <!-- End Container-Fluid -->
    </header>
    <!-- End Header -->

    <hr>

    <div class="container-fluid">
        <div class="row">

            <div class="col-lg-5 col-md-8 col-sm-12 col-lg-offset-3">
                <form id="video-upload" class="form" action="#" method="post" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="name">Video Name: </label>
                        <input type="text" name="name" id="name" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="video">Video File: </label>
                        <input type="file" name="obj" id="obj" class="form-control">
                    </div>

                    <div class="form-group">
                        <button id="upload" type="submit" class="btn btn-default">Upload</button>
                    </div>
                </form>
            </div>

        </div>
        <!-- End Row -->
    </div>
    <!-- End Container-Fluid -->

    <hr>

    <footer>

        <ul>
            <li>
                <a href="#">About</a>
            </li>
            <li>
                <a href="#">Press & Blog</a>
            </li>
            <li>
                <a href="#">Copyrights</a>
            </li>
            <li>
                <a href="#">Creators & Partners</a>
            </li>
            <li>
                <a href="#">Advertising</a>
            </li>
            <li>
                <a href="#">Developers</a>
            </li>
        </ul>

        <ul>
            <li>
                <a href="#">Terms</a>
            </li>
            <li>
                <a href="#">Privacy</a>
            </li>
            <li>
                <a href="#">Policy & Safety</a>
            </li>
            <li>
                <a href="#">Send Feedback</a>
            </li>
            <li>
                <a href="#">Try Something New</a>
            </li>
        </ul>

        <h4>Copyright &copy; 2018 ACME Inc.</h4>

    </footer>
    <!-- End Footer -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="/js/menu.js"></script>

    <script>
        var template = `               
                <video class="col-xs-12 col-sm-12 col-lg-8 col-md-10 col-lg-offset-2 col-md-offset-1" controls>
                    <source src="{{ videoSrc }}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>`

        $('#video-upload').submit(function (e) {
            e.preventDefault();

            if (!$('#name').val() || !/\S/.test($('#name').val())) {
                console.log('Name cannot be null!');
                return;
            }

            var form = $('#video-upload')[0];
			var data = new FormData(form);

            $.ajax({
                url: '/objects/create',
                method: 'POST',
				enctype: 'multipart/form-data',
                cache: false,
                contentType: false,
                processData: false,
                data: data,
                success: function (result) {
                    console.log(result);
                    window.location.href = '/';
                },
                error: function (err) {
                    console.log(err);
                }
            });
        });

    </script>

</body>

</html>